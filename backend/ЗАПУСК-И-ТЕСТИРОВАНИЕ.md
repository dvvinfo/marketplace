# –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–µ–Ω–¥–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
cd backend
npm run start:dev
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- API Gateway –Ω–∞ –ø–æ—Ä—Ç—É **3001**
- User Service (—Å Auth –∏ Address)
- Product Service
- Order Service
- Review Service
- Promo Service
- RabbitMQ
- PostgreSQL

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:3001/api-docs
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è:** http://localhost:3001/

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
```bash
cd frontend
npm run dev
```

–ó–∞—Ç–µ–º:
1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ê–¥—Ä–µ—Å–∞"
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 500

–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É 500 –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞–¥—Ä–µ—Å–∞–º–∏:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ë—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
# –í Windows:
tasklist | findstr node

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001/api-docs
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
cd backend
npm run typeorm migration:show
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: RabbitMQ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ RabbitMQ Management
# http://localhost:15672
# –õ–æ–≥–∏–Ω: guest
# –ü–∞—Ä–æ–ª—å: guest
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –¢–∞–±–ª–∏—Ü–∞ addresses —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```sql
\c marketplace
\dt addresses
SELECT * FROM addresses;
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã addresses (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
cd backend
npm run typeorm migration:run
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
```sql
CREATE TABLE addresses (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL,
  full_name VARCHAR NOT NULL,
  phone VARCHAR NOT NULL,
  country VARCHAR NOT NULL,
  city VARCHAR NOT NULL,
  state VARCHAR,
  postal_code VARCHAR NOT NULL,
  address_line1 VARCHAR NOT NULL,
  address_line2 VARCHAR,
  is_default BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_addresses_user_id ON addresses(user_id);
CREATE INDEX idx_addresses_is_default ON addresses(is_default);
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –Ω–∞–ø—Ä—è–º—É—é

### –ü–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl http://localhost:3001/addresses/user/1
```

### –°–æ–∑–¥–∞—Ç—å –∞–¥—Ä–µ—Å
```bash
curl -X POST http://localhost:3001/addresses \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 1,
    "fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "phone": "+79991234567",
    "country": "–†–æ—Å—Å–∏—è",
    "city": "–ú–æ—Å–∫–≤–∞",
    "postalCode": "123456",
    "addressLine1": "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5",
    "isDefault": true
  }'
```

## –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ API Gateway
–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run start:dev`

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

**–û—à–∏–±–∫–∞:** `Connection refused`
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥ `npm run start:dev`

**–û—à–∏–±–∫–∞:** `relation "addresses" does not exist`
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É (—Å–º. –≤—ã—à–µ)

**–û—à–∏–±–∫–∞:** `ECONNREFUSED rabbitmq`
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ RabbitMQ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker

**–û—à–∏–±–∫–∞:** `password authentication failed`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL –≤ `.env`

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `backend/.env`:
```env
# Database
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=marketplace

# RabbitMQ
RABBITMQ_URL=amqp://localhost:5672

# JWT
JWT_SECRET=your-secret-key

# API Gateway
PORT=3001
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Node.js (Windows)
taskkill /F /IM node.exe

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥
cd backend
npm run start:dev

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -ano | findstr :3001
netstat -ano | findstr :5432
netstat -ano | findstr :5672

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à npm
npm cache clean --force
rm -rf node_modules
npm install
```

## –ì–æ—Ç–æ–≤–æ! üöÄ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –∞–¥—Ä–µ—Å–∞ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ—à–∏–±–æ–∫.
