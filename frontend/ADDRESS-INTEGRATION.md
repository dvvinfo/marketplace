# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤ —Å –±—ç–∫–µ–Ω–¥–æ–º

## –û–±–∑–æ—Ä

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AddressManager` —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –±—ç–∫–µ–Ω–¥ API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω composable `useAddresses.ts`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `frontend/app/composables/useAddresses.ts`

**–§—É–Ω–∫—Ü–∏–∏:**
- `getAddresses(userId)` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `getDefaultAddress(userId)` - –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `createAddress(data)` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å
- `updateAddress(id, userId, data)` - –æ–±–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å
- `setDefaultAddress(id, userId)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `deleteAddress(id, userId)` - —É–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å
- `formatAddressString(address)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –≤ —Å—Ç—Ä–æ–∫—É

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
```typescript
interface Address {
  id: number;
  userId: number;
  fullName: string;
  phone: string;
  country: string;
  city: string;
  state?: string;
  postalCode: string;
  addressLine1: string;
  addressLine2?: string;
  isDefault: boolean;
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AddressManager.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —á–µ—Ä–µ–∑ `useAddresses`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è —Ñ–æ—Ä–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ –±—ç–∫–µ–Ω–¥ DTO:
  - `fullName` - –§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  - `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
  - `country` - –°—Ç—Ä–∞–Ω–∞
  - `city` - –ì–æ—Ä–æ–¥
  - `state` - –†–µ–≥–∏–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `postalCode` - –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
  - `addressLine1` - –ê–¥—Ä–µ—Å (–æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
  - `addressLine2` - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `isDefault` - –ê–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:**
- –§–ò–û –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –¢–µ–ª–µ—Ñ–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)

### 3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–ë–∞–∑–æ–≤—ã–π URL:** `http://localhost:3001`

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /addresses/user/:userId` - —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤
- `GET /addresses/user/:userId/default` - –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `POST /addresses` - —Å–æ–∑–¥–∞—Ç—å –∞–¥—Ä–µ—Å
- `PUT /addresses/:id/user/:userId` - –æ–±–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å
- `PATCH /addresses/:id/user/:userId/default` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `DELETE /addresses/:id/user/:userId` - —É–¥–∞–ª–∏—Ç—å –∞–¥—Ä–µ—Å

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ AddressManager

```vue
<AddressManager :user-id="user.id" />
```

### –ß–µ—Ä–µ–∑ composable

```typescript
const { getAddresses, createAddress, formatAddressString } = useAddresses();

// –ü–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å–∞
const addresses = await getAddresses(userId);

// –°–æ–∑–¥–∞—Ç—å –∞–¥—Ä–µ—Å
const newAddress = await createAddress({
  userId: 1,
  fullName: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
  phone: "+79991234567",
  country: "–†–æ—Å—Å–∏—è",
  city: "–ú–æ—Å–∫–≤–∞",
  postalCode: "123456",
  addressLine1: "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5",
  isDefault: true,
});

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å
const formatted = formatAddressString(address);
// "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5, –ú–æ—Å–∫–≤–∞, 123456, –†–æ—Å—Å–∏—è"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ (POST /addresses)

```json
{
  "userId": 1,
  "fullName": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
  "phone": "+7 (999) 123-45-67",
  "country": "–†–æ—Å—Å–∏—è",
  "city": "–ú–æ—Å–∫–≤–∞",
  "state": "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "postalCode": "123456",
  "addressLine1": "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5",
  "addressLine2": "–ü–æ–¥—ä–µ–∑–¥ 2, –¥–æ–º–æ—Ñ–æ–Ω 123",
  "isDefault": true
}
```

### –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

```json
{
  "id": 1,
  "userId": 1,
  "fullName": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
  "phone": "+7 (999) 123-45-67",
  "country": "–†–æ—Å—Å–∏—è",
  "city": "–ú–æ—Å–∫–≤–∞",
  "state": "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "postalCode": "123456",
  "addressLine1": "—É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10, –∫–≤. 5",
  "addressLine2": "–ü–æ–¥—ä–µ–∑–¥ 2, –¥–æ–º–æ—Ñ–æ–Ω 123",
  "isDefault": true,
  "createdAt": "2025-10-31T12:00:00.000Z",
  "updatedAt": "2025-10-31T12:00:00.000Z"
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –§–ò–û: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
- –¢–µ–ª–µ—Ñ–æ–Ω: –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤
- –°—Ç—Ä–∞–Ω–∞: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
- –ì–æ—Ä–æ–¥: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
- –ò–Ω–¥–µ–∫—Å: –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤
- –ê–¥—Ä–µ—Å (addressLine1): –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ê–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–æ–≤–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ñ–ª–∞–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏—Ö –∞–¥—Ä–µ—Å–æ–≤
2. **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:** –§–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í—Å–µ –ø–æ–ª—è –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—ã–ª–∏ –∞–¥—Ä–µ—Å–∞ –≤ localStorage, –æ–Ω–∏ –ù–ï –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ê–¥—Ä–µ—Å–∞"
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è (–æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
5. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
7. –£–¥–∞–ª–∏—Ç–µ –∞–¥—Ä–µ—Å

## –ì–æ—Ç–æ–≤–æ! üöÄ

–ê–¥—Ä–µ—Å–∞ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
