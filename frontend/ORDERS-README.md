# История заказов - Этап 5

## Описание

Реализована функциональность просмотра истории заказов пользователя с детальной информацией о каждом заказе.

## Созданные файлы

### Страницы

1. **`/app/pages/orders/index.vue`** - Список всех заказов пользователя
   - Отображение всех заказов с основной информацией
   - Статус каждого заказа
   - Сумма и количество товаров
   - Ссылка на детальную страницу

2. **`/app/pages/orders/[id].vue`** - Детальная страница заказа
   - Полная информация о заказе
   - Список товаров с изображениями
   - Адрес доставки
   - Способ оплаты
   - Кнопка "Повторить заказ"

### Компоненты

1. **`OrderCard.vue`** - Карточка заказа для списка
   - Компактное отображение информации
   - Статус заказа
   - Итоговая сумма
   - Кнопка перехода к деталям

2. **`OrderStatus.vue`** - Бейдж статуса заказа
   - Цветовая индикация статуса
   - Локализованные названия статусов

## API эндпоинты

```typescript
GET /api/orders/user/:userId - Получить все заказы пользователя
GET /api/orders/:id - Получить детали заказа
GET /api/orders/:id/items - Получить товары в заказе
```

## Функционал

### Список заказов (`/orders`)

- ✅ Отображение всех заказов пользователя
- ✅ Статус каждого заказа с цветовой индикацией
- ✅ Дата создания заказа
- ✅ Итоговая сумма с учетом скидки
- ✅ Количество товаров
- ✅ Способ доставки и оплаты
- ✅ Переход к детальной странице
- ✅ Skeleton loaders при загрузке
- ✅ Обработка пустого состояния

### Детали заказа (`/orders/:id`)

- ✅ Полная информация о заказе
- ✅ Список товаров с изображениями
- ✅ Количество и цена каждого товара
- ✅ Адрес доставки
- ✅ Способ оплаты и статус
- ✅ Итоговая сумма с разбивкой
- ✅ Кнопка "Повторить заказ" (добавляет товары в корзину)
- ✅ Навигация назад к списку заказов

### Статусы заказов

- `pending` - Ожидает (желтый)
- `processing` - В обработке (синий)
- `shipped` - Отправлен (голубой)
- `delivered` - Доставлен (зеленый)
- `completed` - Завершен (зеленый)
- `cancelled` - Отменен (красный)

## Интеграция

### Навигация

Ссылка на историю заказов добавлена в:
- Меню пользователя в хедере (выпадающее меню)
- Доступна по пути `/orders`

### Защита

Обе страницы защищены middleware `auth` - доступны только авторизованным пользователям.

## Использование

### Просмотр заказов

```typescript
// Автоматически загружается при открытии страницы
const { data: orders } = await useFetch(`/api/orders/user/${userId}`)
```

### Повторение заказа

```typescript
const repeatOrder = async () => {
  for (const item of items.value) {
    await cartStore.addItem(item.product, item.quantity)
  }
  router.push('/cart')
}
```

## Стилизация

- Использованы компоненты Nuxt UI (UCard, UBadge, UButton)
- Адаптивный дизайн (mobile-first)
- Темная тема поддерживается
- Skeleton loaders для улучшения UX

## Что дальше

Опциональные улучшения:
- История статусов заказа (timeline)
- Фильтрация заказов по статусу
- Поиск по заказам
- Экспорт заказа в PDF
- Отмена заказа (если статус позволяет)
- Отслеживание доставки

---

**Дата создания:** 2025-10-31
